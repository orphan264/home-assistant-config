- id: New Device Tracked
  alias: New Device Tracked
  description: =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
  trigger:
  - platform: event
    event_type: device_tracker_new_device
  condition: []
  action:
  - service: persistent_notification.create
    data_template:
      title: 'Newly tracked: {{trigger.event.data.entity_id}}

        '
      message: 'New device tracked: ({{trigger.event.data.entity_id}}) Host: {{trigger.event.data.host_name}}
        Mac-address: {{trigger.event.data.mac}} Data: {{trigger.event.data}}

        '
  mode: single
- id: '1609085637484'
  alias: Someone has come home
  description: =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
  trigger:
  - platform: state
    entity_id: person.amy
    to: home
  - platform: state
    entity_id: person.david
    to: home
  condition: []
  action:
  - service: script.arrive_home_anyone
    data: {}
  - choose:
    - conditions:
      - condition: template
        value_template: '{{ trigger.to_state.entity_id == "person.amy" }}'
      sequence:
      - service: script.arrive_home_amy
        data: {}
    - conditions:
      - condition: template
        value_template: '{{ trigger.to_state.entity_id == "person.david" }}'
      sequence:
      - service: script.arrive_home_david
        data: {}
    default: []
  mode: queued
  max: 5

- alias: 'David: Activity update'
  description: ''
  trigger:
  - platform: state
    entity_id: sensor.vs988_do_not_disturb_sensor
    to: priority_only
    id: set_activity_to_sleep
  - platform: state
    entity_id: sensor.vs988_do_not_disturb_sensor
    to: off
    id: set_activity_to_not_sleep
  - platform: state
    entity_id: sensor.vs988_detected_activity
    to: walking
    id: set_activity_to_walking
  - platform: state
    entity_id: sensor.vs988_detected_activity
    to: still
    id: set_activity_to_still
  condition:
  - condition: template
    value_template: '{{ trigger.to_state.state != trigger.from_state.state }}'
  action:
  - choose:
    - conditions:
      - condition: trigger
        id: set_activity_to_sleep
      sequence:
      - service: input_select.select_option
        target:
          entity_id: input_select.david_activity
        data:
          option: Sleeping
    - conditions:
      - condition: trigger
        id: set_activity_to_not_sleep
      sequence:
      - service: input_select.select_option
        target:
          entity_id: input_select.david_activity
        data:
          option: Still
    - conditions:
      - condition: trigger
        id: set_activity_to_walking
      sequence:
      - service: input_select.select_option
        target:
          entity_id: input_select.david_activity
        data:
          option: Walking
    - conditions:
      - condition: trigger
        id: set_activity_to_still
      sequence:
      - service: input_select.select_option
        target:
          entity_id: input_select.david_activity
        data:
          option: Still
  mode: queued

- id: '1609099392133'
  alias: Monitor - Shop Door
  description: =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
  trigger:
  - platform: state
    entity_id: binary_sensor.basement_door_contact
  condition:
  - condition: state
    entity_id: binary_sensor.tod_overnight
    state: 'on'
  action:
  - service: light.turn_on
    data:
      entity_id: light.exterior_shop_light
      brightness_pct: 100
  mode: single
- id: Process motion detected in Laundry
  alias: Monitor - Laundry motion
  description: =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
  trigger:
  - platform: state
    entity_id: binary_sensor.laundry_motion_occupancy
    to: 'on'
  action:
  - service: switch.turn_on
    data:
      entity_id: switch.laundry_light
  mode: single

- id: Process motion detected in Porch
  alias: Monitor - Porch motion
  description: =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
  trigger:
  - platform: state
    entity_id: binary_sensor.porch_motion_occupancy
    to: 'on'
  condition: []
  action:
  - service: script.tts_house
    data:
      tts_bell: 1
  - service: script.tts_studio
    data:
      tts_bell: 1
  - condition: state
    entity_id: binary_sensor.tod_overnight
    state: 'on'
  - service: light.turn_on
    data:
      entity_id: light.porch_ceiling_light
      brightness_pct: 80
  mode: single

- id: new tts test
  alias: Announce with TTS test
  description: ""
  trigger: []
  condition: []
  action:
    - service: script.tts_test_2023
      data:
        v_speaker_names:
          - media_player.office
          - media_player.painting_room
        v_speaker_names_for_volume:
          - media_player.painting_room
        v_volume_level: 0.3
        v_media_details:
          - v_media_to_play: media-source://media_source/local/bell.wav
          - v_media_to_play: >-
              Someone is at the front door
  mode: single